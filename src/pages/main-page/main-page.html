<!--
  Generated template for the MainPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header class="header">

  <ion-navbar color="bg">
    <ion-title>MainPage</ion-title>
    <ion-buttons end>
      <button ion-button (tap)='logout()' clear>
        <ion-icon name='log-out'></ion-icon>
      </button>
      <!-- <ion-icon name='log-out' (tap)='logout()'></ion-icon> -->
    </ion-buttons>
  </ion-navbar>

</ion-header>


<ion-content>

  <div class="side fixed-content">

    <div class="side-bar-row">
      <ion-icon name="search"></ion-icon>
    </div>
    <div class="side-bar-row">
      <ion-icon name="notifications" (tap)="openNotifications()"></ion-icon>
    </div>
    <div class="side-bar-row">
      <ion-icon name="camera" (tap)="openCamera()"></ion-icon>
    </div>
    <div class="side-bar-row">
      <ion-icon name="videocam" (tap)="openVideoCam()"></ion-icon>
    </div>
    <div class="side-bar-row">
      <ion-icon name="settings" (tap)="moveToRelatedNews()"></ion-icon>
    </div>
    <div class="side-bar-row">
      <ion-icon ios="md-globe" md="md-globe" (tap)="moveToMaps()"></ion-icon>
    </div>
    
  </div>

  <div class = "main-content">
    <div class ="slide-title">
      <ion-title>{{slideTitle}}</ion-title>
    </div>

    <div class="feeds scroll-content">

      <ion-slides (ionSlideDidChange)="changeTitle()" pager>
        <ion-slide class="scroll-content">  
          
          <ion-row>
            <ion-card *ngFor="let post of trendingPosts">
              <ion-item>
                <ion-icon name="pin" item-right (tap)="openMapModal(post.postLat, post.postLng, post.postTitle)"></ion-icon>
                <ion-avatar item-left>
                  <!-- <img src= 'https://limitless-woodland-73873.herokuapp.com/{{post.dp_url}}'> -->
                  <img src= '{{hostURL}}{{post.dpUrl}}'>
                </ion-avatar>
                <h2>{{post.username}}</h2>
                <p>May 12, 1984</p>
              </ion-item>
              <img *ngIf='post.postMediaType == 1' src="{{hostURL}}{{post.postMediaFileURL}}">
              <video *ngIf='post.postMediaType == 2' controls>
                <source src='{{hostURL}}/{{post.mediaFilePath}}' type="video/mp4">
              </video>
              <ion-card-content>
                <p><strong>Title: </strong>{{post.postTitle}}</p>
                <p><strong>Categories:</strong></p>
                <div style = 'height: 4px;'> </div>
                <div *ngFor = 'let postCat of post.postCategories'>
                  <p>{{postCat.categoryName}}</p>
                </div>
                <div class="separator"></div>
                <p (tap)="openCommentsModal(post.postId, post.postDesc, post.username, post.dpUrl)">{{post.postDesc}}</p>
              </ion-card-content>
              <ion-row>
                <ion-col>
                  <button ion-button color="primary" clear icon-left>
                    <ion-icon name='thumbs-up'></ion-icon>
                    {{post.postLikes}}
                  </button>
                </ion-col>
                <ion-col>
                    <button ion-button color="primary" clear icon-left (tap)="openCommentsModal(post.postId, post.postDesc, post.username, post.dpUrl)">
                      <ion-icon name='text'></ion-icon>
                      {{post.postCommentCount}}
                    </button>
                </ion-col>
                <ion-col>
                  <button ion-button color="primary" clear icon-left>
                    <ion-icon name='thumbs-down'></ion-icon>
                    {{post.postDislikes}}
                  </button>
                </ion-col>
                <ion-col align-self-center text-center>
                  <ion-note>30yr ago</ion-note>
                </ion-col>
              </ion-row>
            </ion-card>
          </ion-row>
          
        </ion-slide>

        <ion-slide class="scroll-content">  
          
          <ion-row>
            <ion-card *ngFor="let post of subscribedCategoriesPosts">
              <ion-item>
                <ion-icon name="pin" item-right (tap)="openMapModal(post.postLat, post.postLng, post.postTitle)"></ion-icon>
                <ion-avatar item-left>
                  <!-- <img src= 'https://limitless-woodland-73873.herokuapp.com/{{post.dp_url}}'> -->
                  <img src= '{{hostURL}}{{post.dpUrl}}'>
                </ion-avatar>
                <h2>{{post.username}}</h2>
                <p>May 12, 1984</p>
              </ion-item>
              <img *ngIf='post.postMediaType == 1' src="{{hostURL}}{{post.postMediaFileURL}}">
              <video *ngIf='post.postMediaType == 2' controls>
                <source src='{{hostURL}}/{{post.mediaFilePath}}' type="video/mp4">
              </video>
              <ion-card-content>
                <p><strong>Title: </strong>{{post.postTitle}}</p>
                <p><strong>Categories:</strong></p>
                <div style = 'height: 4px;'> </div>
                <div *ngFor = 'let postCat of post.postCategories'>
                  <p>{{postCat.categoryName}}</p>
                </div>
                <div class="separator"></div>
                <p (tap)="openCommentsModal(post.postId, post.postDesc, post.username, post.dpUrl)">{{post.postDesc}}</p>
              </ion-card-content>
              <ion-row>
                <ion-col>
                  <button ion-button color="primary" clear icon-left>
                    <ion-icon name='thumbs-up'></ion-icon>
                    {{post.postLikes}}
                  </button>
                </ion-col>
                <ion-col>
                    <button ion-button color="primary" clear icon-left (tap)="openCommentsModal(post.postId, post.postDesc, post.username, post.dpUrl)">
                      <ion-icon name='text'></ion-icon>
                      {{post.postCommentCount}}
                    </button>
                </ion-col>
                <ion-col>
                  <button ion-button color="primary" clear icon-left>
                    <ion-icon name='thumbs-down'></ion-icon>
                    {{post.postDislikes}}
                  </button>
                </ion-col>
                <ion-col align-self-center text-center>
                  <ion-note>30yr ago</ion-note>
                </ion-col>
              </ion-row>
            </ion-card>
          </ion-row>
          
        </ion-slide>

        <ion-slide class="scroll-content">  

          <ion-row>
             <ion-card *ngFor="let post of postByLoggedInUser">
              <ion-item>
                <ion-icon name="pin" item-right (tap)="openMapModal(post.postLat, post.postLng, post.postTitle)"></ion-icon>
                <ion-avatar item-left>
                  <!-- <img src= 'https://limitless-woodland-73873.herokuapp.com/{{post.dp_url}}'> -->
                  <img src= '{{hostURL}}{{loggedInUserDpURL}}'>
                </ion-avatar>
                <h2>{{loggedInUsername}}</h2>
                <p>May 12, 1984</p>
              </ion-item>
              <img *ngIf='post.postMediaType == 1' src="{{hostURL}}{{post.postMediaFileURL}}">
              <video *ngIf='post.postMediaType == 2' controls>
                <source src='{{hostURL}}{{post.postMediaFileURL}}' type="video/mp4">
              </video>
              <ion-card-content>
                <p><strong>Title: </strong>{{post.postTitle}}</p>
                <p><strong>Categories:</strong></p>
                <div style = 'height: 4px;'> </div>
                <div *ngFor = 'let postCat of post.postCategories'>
                  <p>{{postCat.categoryName}}</p>
                </div>
                <div class="separator"></div>
                <p (tap)="openCommentsModal(post.postId, post.postDesc, loggedInUsername, loggedInUserDpURL)">{{post.postDesc}}</p>
              </ion-card-content>
              <ion-row>
                <ion-col>
                  <button ion-button color="primary" clear icon-left>
                    <ion-icon name='thumbs-up'></ion-icon>
                    {{post.postLikes}}
                  </button>
                </ion-col>
                <ion-col>
                    <button ion-button color="primary" clear icon-left (tap)="openCommentsModal(post.postId, post.postDesc, loggedInUsername, loggedInUserDpURL)">
                      <ion-icon name='text'></ion-icon>
                      {{post.postCommentCount}}
                    </button>
                </ion-col>
                <ion-col>
                  <button ion-button color="primary" clear icon-left>
                    <ion-icon name='thumbs-down'></ion-icon>
                    {{post.postDislikes}}
                  </button>
                </ion-col>
                <ion-col align-self-center text-center>
                  <ion-note>30yr ago</ion-note>
                </ion-col>
              </ion-row>
            </ion-card> 
          </ion-row>

        </ion-slide>
      </ion-slides>

    </div>
  </div>

</ion-content>
